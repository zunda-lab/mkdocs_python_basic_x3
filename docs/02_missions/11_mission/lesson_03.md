# ファイルを読み指定文字列の出現数をカウントする方法を学ぼう

第１１ミッション、これまでのレッスンで、ファイルを扱う基本的な手順やコーディング方法、それから指定した文字列の出現回数をカウントする方法を学習してきました。

さあ、次のコーディング演習がミッションコンプリートのための最終問題です。

このレクチャーでは、最終問題である、ファイルを読み指定文字列の出現数をカウントする問題の、イメージをお伝えした後、この後挑むコーディング演習の問題文の説明、コーディングに関するアドバイスを行います。

ゴールは目の前です。一緒に学びましょう。

## 第11ミッション最終問題のイメージ

はじめに、第１１ミッションの最終問題である「ファイルを読み指定文字列の出現数をカウントする」の問題イメージを共有したいと思います。

読み込むファイルはご覧のファイルです。

```
みかん
りんご
もも
バナナ
ぶどう
りんご
りんご
りんご
みかん
ぶどう
みかん
もも
みかん
りんご
バナナ
バナナ
みかん
もも
りんご
ぶどう
```

ファイル名は「エフ・アール・ユー・アイ・ティー・エス・ピリオド・ティー・エックス・ティー」「フルーツ・ピリオド・テキスト」ファイルです。

ファイルには２０個の果物の名前が保存されています。スライドでは２列で書きましたが、実際は１列２０行のイメージです。

このファイルを読み込んで「りんご」という文字列の出現数をカウントするんです。りんごは太文字で表示されていて６個ですね。

プログラムのイメージは次の通りです。

1. ファイルを開く
1. ファイルを読み込む（全部読み）
1. countメソッドでりんごの数を数える
1. りんごの数を表示する
1. ファイルを閉じる

このプログラムによってディスプレイに数字の６が表示されれば、ミッションコンプリートです。

## 第11ミッションの問題文 

次のレクチャーはコーディング演習です。このスライドでは、コーディング演習の問題文を紹介し、次のスライドで問題文に対するコーディングアドバイスを紹介します。

```
以下の問題文を読み、プログラム中の "....." を修正してください。
ファイルの中の特定の文字列の出現数をカウントする
1. 3行目の "......" を修正して、open 関数で 'fruits.txt' ファイルを読み込みモードで開き、戻り値のファイルオブジェクトを変数 f に格納する文にしてください。
2. 5行目の "......" を修正して、変数 f の read メソッドでファイルの内容を全て読み込み、変数 filedata に格納する文にしてください。
3. 8行目の "......" を修正して、変数 s に格納された文字列に 'りんご'　がいくつ含まれるか文字列の count メソッドでカウントして、 出現数を変数 apple_num に格納する文にしてください。
4. 12行目の "......" を修正して、変数 f の close メソッドを使用して、ファイルを閉じる文にしてください。
```

問題文を読みます。

以下の問題文を読み、プログラム中のテンテンテンを修正してください。

ファイルの中の特定の文字列の出現数をカウントする

3行目のテンテンテンを修正して、open 関数で 'fruits.txt' ファイルを読み込みモードで開き、戻り値のファイルオブジェクトを変数 f に格納する文にしてください。

5行目のテンテンテンを修正して、変数 f の read メソッドでファイルの内容を全て読み込み、変数 filedata に格納する文にしてください。

8行目のテンテンテンを修正して、変数 s に格納された文字列に 'りんご'　がいくつ含まれるか、文字列の count メソッドでカウントして、 出現数を変数 apple_num に格納する文にしてください。

12行目のテンテンテンを修正して、変数 f の close メソッドを使用して、ファイルを閉じる文にしてください。

## 第11ミッションのコーディング

```
f = .....('fruits.txt', 'r')
filedata = f.....()
apple_num = .....count('りんご')
print(apple_num)
.....close()
```

コーディング演習を始めると、エディタエリアには、スライドに示した半完成プログラムがあらかじめ入力された状態となっています。

本当はコメント文も入っていますが、プログラムにフォーカスしてご覧いただくために、コメント文を取り除いて掲載しました。

この半完成プログラムの「テンテンテン」の部分を修正していくんです。

次のスライドで「テンテンテン」に何が入るか説明します。今回もネタバレです。ごめんなちゃい。

```
01: # 'fruits.txt' ファイルを読み込みモードで開き、
02: # 戻り値のファイルオブジェクトを変数 f に格納します。
03: f␣=␣open('fruits.txt',␣'r')
04: # ファイルの内容を読み込み、変数 filedata に格納します。
05: filedata␣=␣f.read()
06: # 変数 s に格納された文字列に 'りんご'　がいくつ含まれるか
07: # カウントして、出現数を変数 apple_num に格納します。
08: apple_num␣=␣filedata.count('りんご')（続く）
09: # 出現数を表示します。
10: print(apple_num)
11: # ファイルを閉じます。
12: f.close()
```

このスライドでは、エディタエリアにあらかじめ入力されているプログラムとコメント文を説明し、テンテンテンにどのようにプログラムを埋めればいいのかを紹介します。

３行目に「f・スペース・イコール・スペース・テンテンテン・丸カッコ・シングルクォーテーション・フルーツ・ピリオド・ティーエックスティ・シングルクォーテーション・カンマ・スペース・シングルクォーテーション・r・シングルクォーテーション・丸カッコ閉じ」と入力されていますので、テンテンテンの部分をすぐ上のコメント「 'fruits.txt' ファイルを読み込みモードで開き、戻り値のファイルオブジェクトを変数 f に格納します。」の通りにコーディングします。赤い字の部分だけ読み上げます。「open」

５行目に「filedata・スペース・イコール・スペース・f・テンテンテン・丸カッコ・丸カッコ閉じ」と入力されていますので、テンテンテンの部分をすぐ上のコメント「ファイルの内容を読み込み、変数 filedata に格納します。」の通りにコーディングします。赤い字の部分だけ読み上げます。「ピリオド・read」

８行目に「apple_num・スペース・イコール・スペース・テンテンテン・count・丸カッコ・シングルクォーテーション・りんご・シングルクォーテーション・丸カッコ閉じ」と入力されていますので、テンテンテンの部分をすぐ上のコメント「変数 s に格納された文字列に 'りんご' がいくつ含まれるかカウントして、出現数を変数 apple_num に格納します。」の通りにコーディングします。赤い字の部分だけ読み上げます。「filedata・ピリオド」

１０行目は、カウントしたりんごの出現数をディスプレイに表示しています。

１２行目に「テンテンテン・close・丸カッコ・丸カッコ閉じ」と入力されていますので、テンテンテンの部分をすぐ上のコメント「ファイルを閉じます。」の通りにコーディングします。赤い字の部分だけ読み上げます。「f・ピリオド」

これで完成です。

「先生、プログラムからファイルを読むなんて、いよいよ本格的なプログラムって感じがします。」

そうですよね。本当かどうか、早くコーディング演習で実験したくなっているんじゃないでしょうか。

以上「ファイルを読み指定文字列の出現数をカウントする方法を学ぼう」でした。